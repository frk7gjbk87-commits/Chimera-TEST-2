<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chimera Desktop</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./macos-shell.css" />
</head>
<body>
  <div id="desktop" class="desktop">
    <div id="wallpaper-image" class="wallpaper-image"></div>
    <video id="wallpaper-video" class="wallpaper-video" muted loop playsinline></video>
    <div class="wallpaper-overlay"></div>

    <header class="menu-bar" role="banner">
      <div class="menu-left">
        <span class="brand-dot" aria-hidden="true"></span>
        <span class="brand-text">Chimera Desktop</span>
      </div>
      <div class="menu-center">
        <span id="active-app-label">Desktop</span>
      </div>
      <div class="menu-right">
        <span id="device-label" class="status-chip">Device: Detecting...</span>
        <span id="network-label" class="status-chip">Network: Detecting...</span>
        <span id="battery-label" class="status-chip">Battery: Detecting...</span>
        <span id="time-label" class="status-chip mono">--:--</span>
      </div>
    </header>

    <main id="workspace" class="workspace" role="main">
      <section
        id="window-notes"
        class="app-window"
        data-app="notes"
        aria-label="Chimera Notes Window"
        style="top: 64px; left: 48px; width: min(1200px, calc(100vw - 96px)); height: calc(100vh - 170px);"
      >
        <div class="window-titlebar" data-drag-handle>
          <div class="window-controls">
            <button type="button" class="window-btn close" data-action="close" aria-label="Close Notes"></button>
            <button type="button" class="window-btn min" data-action="min" aria-label="Minimize Notes"></button>
            <button type="button" class="window-btn max" data-action="max" aria-label="Toggle size"></button>
          </div>
          <span class="window-title">Chimera Notes</span>
        </div>
        <div class="window-content">
          <iframe
            class="app-frame"
            src="./chimera-notes-app.html"
            title="Chimera Notes"
            loading="eager"
          ></iframe>
        </div>
      </section>

      <section
        id="window-ai"
        class="app-window hidden"
        data-app="ai"
        aria-label="Chimera AI Window"
        style="top: 92px; left: 128px; width: min(980px, calc(100vw - 160px)); height: min(760px, calc(100vh - 220px));"
      >
        <div class="window-titlebar" data-drag-handle>
          <div class="window-controls">
            <button type="button" class="window-btn close" data-action="close" aria-label="Close AI"></button>
            <button type="button" class="window-btn min" data-action="min" aria-label="Minimize AI"></button>
            <button type="button" class="window-btn max" data-action="max" aria-label="Toggle size"></button>
          </div>
          <span class="window-title">Chimera AI</span>
        </div>
        <div class="window-content">
          <iframe
            class="app-frame"
            src="./chimera-ai-app.html"
            title="Chimera AI"
            loading="lazy"
          ></iframe>
        </div>
      </section>

      <section
        id="window-settings"
        class="app-window hidden"
        data-app="settings"
        aria-label="Desktop Settings Window"
        style="top: 110px; left: 180px; width: min(740px, calc(100vw - 180px)); height: min(620px, calc(100vh - 220px));"
      >
        <div class="window-titlebar" data-drag-handle>
          <div class="window-controls">
            <button type="button" class="window-btn close" data-action="close" aria-label="Close Settings"></button>
            <button type="button" class="window-btn min" data-action="min" aria-label="Minimize Settings"></button>
            <button type="button" class="window-btn max" data-action="max" aria-label="Toggle size"></button>
          </div>
          <span class="window-title">Desktop Settings</span>
        </div>

        <div class="window-content settings-surface">
          <h1>Personalization</h1>
          <p class="muted">Changes here style the desktop shell only. The Chimera Notes app remains untouched.</p>

          <div class="settings-grid">
            <section class="card">
              <h2>Dock</h2>
              <label class="field">
                <span>Dock Position</span>
                <select id="dock-position">
                  <option value="bottom">Bottom</option>
                  <option value="left">Left</option>
                  <option value="right">Right</option>
                </select>
              </label>
              <label class="field checkbox">
                <input id="dock-autohide" type="checkbox" />
                <span>Auto-hide dock</span>
              </label>
            </section>

            <section class="card">
              <h2>Wallpaper</h2>
              <label class="field">
                <span>Apply from URL (image/video)</span>
                <input id="wallpaper-url" type="url" placeholder="https://example.com/wallpaper.jpg" />
              </label>
              <div class="actions-row">
                <button id="apply-wallpaper-url" type="button">Apply URL</button>
                <button id="clear-wallpaper-url" type="button" class="quiet">Clear URL</button>
              </div>
              <label class="field">
                <span>Upload image or video</span>
                <input id="wallpaper-upload" type="file" accept="image/*,video/*" />
              </label>
              <button id="reset-wallpaper" type="button" class="quiet">Reset to default</button>
            </section>
          </div>
        </div>
      </section>
    </main>

    <button id="dock-peek" class="dock-peek hidden" type="button" aria-label="Show dock">Show Dock</button>

    <aside id="dock" class="dock-wrap bottom" aria-label="Application Dock">
      <div class="dock-inner">
        <button id="open-notes" class="dock-app" data-app-launch="notes" type="button" title="Chimera Notes">
          <span class="glyph">N</span>
          <span class="label">Notes</span>
        </button>
        <button id="open-ai" class="dock-app" data-app-launch="ai" type="button" title="Chimera AI">
          <span class="glyph">AI</span>
          <span class="label">AI</span>
        </button>
        <button id="open-settings" class="dock-app" data-app-launch="settings" type="button" title="Desktop Settings">
          <span class="glyph">S</span>
          <span class="label">Settings</span>
        </button>
      </div>
    </aside>
  </div>

  <script type="module" src="./macos-shell.js"></script>
</body>
</html>
